



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Programming notes, snipets and examples in one place.">
      
      
      
        <meta name="author" content="José Aniceto">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>Building a Django site - Programming Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#building-a-django-site" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Programming Notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Programming Notes
              </span>
              <span class="md-header-nav__topic">
                Building a Django site
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Programming Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Programming Notes" class="md-nav__link">
      Programming Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/batch-script/" title="Create a Windows batch script" class="md-nav__link">
      Create a Windows batch script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/crontab/" title="Linux Crontab" class="md-nav__link">
      Linux Crontab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/deploy-django/" title="Deploy a Django app in an Ubuntu VPS (DigitalOcean)" class="md-nav__link">
      Deploy a Django app in an Ubuntu VPS (DigitalOcean)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/dev-environments/" title="Development environments" class="md-nav__link">
      Development environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/git/" title="Git Version Control System" class="md-nav__link">
      Git Version Control System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/keep-ssh-running/" title="Keep SSH sessions running after disconnecting" class="md-nav__link">
      Keep SSH sessions running after disconnecting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/os-env-vars/" title="Hiding Passwords and Secret Keys in Environment Variables" class="md-nav__link">
      Hiding Passwords and Secret Keys in Environment Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/server-setup/" title="Initial Server Setup with Ubuntu 18.04" class="md-nav__link">
      Initial Server Setup with Ubuntu 18.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/ubuntu-vps/" title="Deploy a Flask Application on an Ubuntu VPS (DigitalOcean)" class="md-nav__link">
      Deploy a Flask Application on an Ubuntu VPS (DigitalOcean)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/web-dev-resources/" title="Online Resources For Web Developers" class="md-nav__link">
      Online Resources For Web Developers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Html css
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Html css
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../html-css/css-selectors/" title="CSS selectors" class="md-nav__link">
      CSS selectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Javascript
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Javascript
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../javascript/DataTables/" title="DataTables JS Library" class="md-nav__link">
      DataTables JS Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../javascript/cache-data/" title="Caching data" class="md-nav__link">
      Caching data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../args-kwargs/" title="*args and **kwargs" class="md-nav__link">
      *args and **kwargs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../beautifulsoup4/" title="Web scrapping with Beautiful Soup 4" class="md-nav__link">
      Web scrapping with Beautiful Soup 4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../builtin-functions/" title="Sorting lists" class="md-nav__link">
      Sorting lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../classes/" title="Classes and OOP (Object Oriented Programming)" class="md-nav__link">
      Classes and OOP (Object Oriented Programming)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../csv/" title="CSV files" class="md-nav__link">
      CSV files
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Building a Django site
      </label>
    
    <a href="./" title="Building a Django site" class="md-nav__link md-nav__link--active">
      Building a Django site
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-django" title="Installing Django" class="md-nav__link">
    Installing Django
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-project" title="Start project" class="md-nav__link">
    Start project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-app" title="Create an app" class="md-nav__link">
    Create an app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-migrations-databases" title="Make migrations (databases)" class="md-nav__link">
    Make migrations (databases)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-control-panel" title="Admin control panel" class="md-nav__link">
    Admin control panel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-mysql-database" title="Using MySQL database" class="md-nav__link">
    Using MySQL database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django-authentication-system" title="Django authentication system" class="md-nav__link">
    Django authentication system
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-ajax-post-requests-in-django" title="Performing AJAX POST Requests in Django" class="md-nav__link">
    Performing AJAX POST Requests in Django
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../email/" title="Email" class="md-nav__link">
      Email
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flask/" title="Flask" class="md-nav__link">
      Flask
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hosting/" title="Hosting" class="md-nav__link">
      Hosting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../image-manipulation/" title="Image manipulation" class="md-nav__link">
      Image manipulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../imports/" title="Imports" class="md-nav__link">
      Imports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../magic-methods/" title="Magic methods" class="md-nav__link">
      Magic methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matlab/" title="Matlab" class="md-nav__link">
      Matlab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mysql/" title="Mysql" class="md-nav__link">
      Mysql
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../progress-bar/" title="Progress bar" class="md-nav__link">
      Progress bar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../slice-notation/" title="Slice notation" class="md-nav__link">
      Slice notation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../snippets/" title="Snippets" class="md-nav__link">
      Snippets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../store-dicts/" title="Store dicts" class="md-nav__link">
      Store dicts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stravalib/" title="Stravalib" class="md-nav__link">
      Stravalib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../string-formatting/" title="String formatting" class="md-nav__link">
      String formatting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../virtual-environments/" title="Virtual environments" class="md-nav__link">
      Virtual environments
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-django" title="Installing Django" class="md-nav__link">
    Installing Django
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-project" title="Start project" class="md-nav__link">
    Start project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-app" title="Create an app" class="md-nav__link">
    Create an app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-migrations-databases" title="Make migrations (databases)" class="md-nav__link">
    Make migrations (databases)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-control-panel" title="Admin control panel" class="md-nav__link">
    Admin control panel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-mysql-database" title="Using MySQL database" class="md-nav__link">
    Using MySQL database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django-authentication-system" title="Django authentication system" class="md-nav__link">
    Django authentication system
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-ajax-post-requests-in-django" title="Performing AJAX POST Requests in Django" class="md-nav__link">
    Performing AJAX POST Requests in Django
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="building-a-django-site">Building a Django site</h1>
<h2 id="installing-django">Installing Django</h2>
<p><code>pip install Django</code></p>
<h2 id="start-project">Start project</h2>
<p>Navigate via the terminal or command prompt to an area where you want to work on your project, then do:</p>
<p><code>django-admin startproject mysite</code></p>
<p>This will create a directory called mysite. Within that directory, you have another one called mysite, along with a manage.py file. The manage.py file lets you easily interact with your project via the command line. The contents of the second mysite directory contain your settings and urls mainly. Broken down:</p>
<pre><code class="cmd">/mysite/  REM Simple container, Call whatever you want.
    manage.py  REM Lets you interact with your project via the command line.
    /mysite/  REM Actual project directory.
        __init__.py  REM Tells python this is a Python package.
        settings.py  REM Settings for the project.
        urls.py  REM URL rules. Django docs aptly describes as your table of contents.
        wsgi.py  REM WSGI magic begins here. Worry about this when it comes time to actually deploy to a server.
</code></pre>

<p>The paradigm of Django is that either a website is an app, or a collection of apps in most cases. We currently have our website, called "mysite" for now. For now, run the following via the command line or terminal to run the local development server, which you can reach at http://127.0.0.1:8000. </p>
<pre><code>cd mysite
python manage.py runserver
</code></pre>

<h3 id="create-an-app">Create an app</h3>
<p><code>python manage.py startapp webapp</code></p>
<p>Now a new directory exists, called webapp. In here, we see a lot of similar files, and some new ones:</p>
<pre><code>webapp/
    migrations/ 
    __init__.py
    admin.py
    apps.py
    models.py
    tests.py
    views.py
</code></pre>

<p>Next, we need to include our new app in our installed applications:</p>
<p>Open the <code>mysite/settings.py</code> file and add the <code>'webapp'</code> line:</p>
<pre><code class="python"># ...this is just a slice of code within settings.py 
# do not delete the other code
# just add 'webapp' to the list.
INSTALLED_APPS = [
    'webapp',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]
</code></pre>

<h3 id="make-migrations-databases">Make migrations (databases)</h3>
<p>Whenever you define new models, you need to migrate: </p>
<p><code>python manage.py makemigrations</code></p>
<p>The <code>makemigrations</code> command tells Django that you've made some model changes, and you want to save them as a migration. Migrations are used any time you want Django to recognize changes to the models and database schema. <strong>Adding data to an existing database table, for example, is not something that needs a migration, changing that table's structure (by changing the model), would require a migration.</strong> You can also tell Django you want to make migrations for only a specific app, like: <code>python manage.py makemigrations webapp</code></p>
<p>Once you've made migrations, nothing has actually happened yet. You can run a migrate, but there is one more check you can make. This will output the proposed SQL that will be run for you by Django when you migrate. The <code>0001</code> is the migration ID. You can see this on the <code>0001_initial.py</code> file in the migrations folder of your app.</p>
<p><code>python manage.py sqlmigrate webapp 0001</code> (Optional)</p>
<p>If all looks good, you can run the <code>migrate</code> command. This will actually perform the migrations. If this is your first time doing this, you should see quite a bit has been migrated.</p>
<p><code>python manage.py migrate</code></p>
<h3 id="admin-control-panel">Admin control panel</h3>
<p>To access the admin page, you visit /admin/, assuming the admin app is indeed installed. To login to the admin panel you need to create an user:</p>
<p><code>python manage.py createsuperuser</code></p>
<p>To register a model create a webapp/admin.py file, and in it put:</p>
<pre><code class="python">from django.contrib import admin
from webapp.models import Post

admin.site.register(Post)
</code></pre>

<p>Here, we are importing the admin, the Post model, and then we're registering the Post model.</p>
<h2 id="using-mysql-database">Using MySQL database</h2>
<p>By default Django works with SQLite database management system. First, create the MySQL database using the MySQL shell: </p>
<p><code>CREATE DATABASE django_db;</code></p>
<p>To use MySQL in Django, instead of SQLite, do the following:</p>
<p><code>pip install mysqlclient</code></p>
<p>Go to the main <code>settings.py</code> file and modify the DATABASES section to:</p>
<pre><code class="python">DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'django_db',
        'USER': 'root',
        'PASSWORD': '123456',
        'HOST': 'localhost',
        'PORT': ''
    }
}
</code></pre>

<p>Now you can run the migrate command to create all tables Django needs: <code>python manage.py migrate</code></p>
<h2 id="django-authentication-system">Django authentication system</h2>
<p>Base project struture for this section:</p>
<pre><code>mysite/
  manage.py

  mysite/
    __init__.py
    settings.py
    urls.py
    wsgi.py

  app1/
    __init__.py
    admin.py
    apps.py
    migrations/
    models.py
    tests.py
    views.py
</code></pre>

<pre><code class="python"># mysite/urls.py

</code></pre>

<pre><code class="python"># mysite/urls.py

urlpatterns = [
  ...
  path('accounts/', include(django.contrib.auth.urls))
]
</code></pre>

<h2 id="performing-ajax-post-requests-in-django">Performing AJAX POST Requests in Django</h2>
<p>Ref: http://coreymaynard.com/blog/performing-ajax-post-requests-in-django/</p>
<p>A common pitfall that shows up when developing a Django application is when you try and make your first POST request to your server from AJAX. As a response you receive a helpful 403 FORBIDDEN notice, and not much other information. There's a fairly simple way of handling this issue in a seamless fashion,.</p>
<p>Firstly, let's discuss the actual problem that is causing this. Django comes with a security feature called Cross Site Request Forgery protection. A CSRF attack is when some external malicious site contains a link with some JavaScript that is intended to perform an action on your web site using the credentials of a logged-in-user who visited the malicious site in their browser. To protect against this, Django adds a CSRF token to every request that must be included with every unsafe HTTP request method (POST, PUT, and DELETE). This random string is verified upon every request, and if it is not valid (or not present) the server will respond with 403 FORBIDDEN.</p>
<p>So, assuming you already have a Django project all setup and ready to go, we're going to create a view and a template to show the POST request in action. Just to keep things simple, we're going to do this in a separate app, so go ahead and create a new app and add it to your INSTALLED_APPS list. Inside of that app let's modify the views file and make it look like this:</p>
<pre><code class="python">from django.views.generic import TemplateView
from django.http import HttpResponse

import json

class PostExample(TemplateView):
    template_name = 'start.html'

    def post(self, request):
        return HttpResponse(json.dumps({'key': 'value'}), mimetype=&quot;application/json&quot;)
</code></pre>

<p>What we're doing here is creating an incredibly basic view that on a GET request will respond with the <code>start.html</code> template and on a post request will respond with a hard coded JSON dictionary. Now we need to add the URL for this view to the project:</p>
<pre><code class="python">url(r'^$', PostExample.as_view(), name='test-start'),
</code></pre>

<p>The template we're going to develop here will be equally simple, let's start with the following:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script src=&quot;{{ STATIC_URL }}js/jquery-1.11.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function() {
    $(&quot;#post&quot;).click(function(e) {
        e.preventDefault();
        var data = {
            'foo': 'bar'
        }

        $.ajax({
            &quot;type&quot;: &quot;POST&quot;,
            &quot;dataType&quot;: &quot;json&quot;,
            &quot;url&quot;: &quot;/test/&quot;,
            &quot;data&quot;: data,
            &quot;success&quot;: function(result) {
                console.log(result);
            },
        });
    });
});
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;PostExample&lt;/h1&gt;
    &lt;p&gt;&lt;a href=&quot;&quot; id=&quot;post&quot;&gt;Post Request&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>If you were to go to that page and click the link, you instead of a lovely JSON response you would see the 403 FORBIDDEN notice. Let's take care of that. The way to solve this is by overriding the jQuery beforeSend method on an AJAX query and grabbing the CSRF token embedded in the request and including it in the POST headers. Create a new JavaScript file and add the following to it, and make sure to include it into your template:</p>
<pre><code class="javascript">function getCookie(name) {
    var cookieValue = null;
    if (document.cookie &amp;&amp; document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i &lt; cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
            // Only send the token to relative URLs i.e. locally.
            xhr.setRequestHeader(&quot;X-CSRFToken&quot;, getCookie('csrftoken'));
        }
    }
});
</code></pre>

<p>With that being done, all you have to do is add the CSRF token into the template like this:</p>
<pre><code>{% csrf_token %}
</code></pre>

<p>That takes care of it! You can now make AJAX POST requests from within your application, without doing any specific work on a per instance basis.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../csv/" title="CSV files" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                CSV files
              </span>
            </div>
          </a>
        
        
          <a href="../email/" title="Email" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Email
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>